<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inventario - Fruitsha Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="styles.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
  <script src="firebase.js"></script>
</head>
<body>
  <header>
    <h1>Gesti√≥n de Inventario</h1>
  </header>

  <main>
    <h2>Agregar producto</h2>
    <input type="text" id="nombre" placeholder="Nombre del producto">
    <input type="number" id="precio" placeholder="Precio">
    <input type="number" id="stock" placeholder="Stock inicial">
    <button id="agregar">Agregar producto</button>

    <h2>Lista de productos</h2>
    <div id="productos"></div>
  </main>

  <script>
    const db = firebase.firestore();

    const productosDiv = document.getElementById('productos');
    const agregarBtn = document.getElementById('agregar');

    // Cargar productos en tiempo real
    db.collection("productos").onSnapshot(snapshot => {
      productosDiv.innerHTML = '';
      snapshot.forEach(doc => {
        const producto = doc.data();
        const div = document.createElement('div');
        div.innerHTML = `
          <h3>${producto.nombre}</h3>
          <p>Precio: S/ ${producto.precio}</p>
          <p>Stock: ${producto.stock}</p>
        `;
        productosDiv.appendChild(div);
      });
    });

    // Agregar nuevo producto
    agregarBtn.addEventListener('click', async () => {
      const nombre = document.getElementById('nombre').value;
      const precio = parseFloat(document.getElementById('precio').value);
      const stock = parseInt(document.getElementById('stock').value);

      if (!nombre || isNaN(precio) || isNaN(stock)) {
        alert('Por favor, completa todos los campos.');
        return;
      }

      await db.collection("productos").add({
        nombre,
        precio,
        stock
      });

      alert('Producto agregado correctamente');
    });
  </script>
</body>
</html>